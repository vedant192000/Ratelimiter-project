
const { Router } = require('express')

module.exports = function Group(...args) {
    
    const path = (typeof args[0] ==='string') ? args[0] : undefined

    const router = Router()
    let internalRouter
    if (path) {
        internalRouter = Router()
        router.use(path, internalRouter)
    } else {
        internalRouter = router
    }

    // skip the first item if it was a string
    // leave the last item too
    for (let i = (path) ? 1 : 0; i < args.length -1; i++) {
        internalRouter.use(args[i])
    }

    const callback = args[args.length -1]
    callback(internalRouter)

    return router
}
